name: CI

'on':
  pull_request:
  push:

jobs:
  tests:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        ssh-key: "${{ secrets.SSH_KEY }}"
        submodules: recursive

    - name: Make all
      run: make

    - name: Watch logs
      run: docker-compose logs --tail=0 --follow

    - name: Watch all
      run: docker-compose ps

